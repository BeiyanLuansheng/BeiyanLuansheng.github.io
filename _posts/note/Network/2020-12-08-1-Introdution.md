---
title: 1 概述
author: BeiyanLuansheng
date: 2020-12-08 10:56:33 +0800
categories: [学习笔记, 计算机网络]
tags: [计算机网络, HITCN, 2020秋]
math: true
mermaid: true
---

## 1.1 计算机网络

### 1.1.1 计算机网络与Internet

**计算机网络**：计算机网络就是**互连的、自治的**计算机集合。

- 自治：无主从关系
- 互连：互联互通——通信链路。通过**交换网络**互连主机，在距离远、数量大时保证互连。

**Internet**：全球最大的**互联网络**。ISP(Internet Service Provider) 网络互连的“**网络之网络**”

- 数以百万计的互连的**计算设备集合**：
  - **主机 (hosts) = 端系统 (end systems)**
  - 运行各种网络应用
- **通信链路**：光纤, 铜缆, 无线电, 卫星……
- **分组交换**： 转发分组 (数据包)：**路由器 (routers)** 和**交换机 (switches)**

- **为网络应用提供通信服务的通信基础设施**：Web, VoIP, email, 网络游戏, 电子商务, 社交网络, …
- **为网络应用提供应用编程接口 (API)**：支持应用程序“连接”Internet，发送/接收数据。提供类似于邮政系统的数据传输服务

### 1.1.2 网络协议

>协议是计算机网络有序运行的重要保证
>
>任何通信或信息交换过程都需要规则
>
>协议规范了网络中所有信息发送和接收过程

**网络协议(network protocol)**：简称为协议，是为进行网络中的数据交换而建立的规则、标准或约定。

协议规定了通信实体之间所交换的消息的格式、意义、顺序以及针对收到信息或发生的事件所采取的“动作” (actions)

**协议的三要素**：

- **语法 (Syntax)**：数据与控制信息的结构或格式；信号电平
- **语义 (Semantics)**：需要发出何种控制信息；完成何种动作以及做出何种响应；差错控制
- **时序 (Timing)**：事件顺序；速度匹配

## 1.2 计算机网络结构

### 1.2.1 计算机网络结构

> 计算机网络由三部分构成：网络边缘、接入网络、网络核心

- **网络边缘**：主机、 网络应用
  - **主机(端系统)**：位于“网络边缘”，运行网络应用程序。如：Web, email
  - **客户/服务器(client/server)应用模型**：客户发送请求，接收服务器响应。如：Web应用，文件传输FTP应用
  - **对等(peer-peer, P2P)应用模型**：无 (或不仅依赖)专用服务器，通信在对等实体之间直接进行。如：Gnutella, BT, Skype, QQ

- **接入网络，物理介质**：有线或无线通信链路
  - 通过接入网络将网络边缘接入核心网 (边缘路由器)
  - **带宽：数据传输速率。**
  - 典型的接入网络：
    - 数字用户线路 (DSL)：利用已有的电话线连接中心局的DSLAM，一般上传下载带宽是不同的，因此被称为**非对称数字用户线路**
    - 电缆网络：频分多路复用——在不同频带 (载波)上传输不同频道。各家庭共享家庭至电缆头端的接入网络，不同于DSL的独占至中心局的接入。
    - 典型家庭网络的接入
    - 机构 (企业)接入网络 (Ethernet)：端系统通常直接连接以太网交换机 (switch)
    - 无线接入网络：通过**共享的**无线接入网络 (**基站 (base station)**或称为“**接入点 (access point)**”) 连接端系统与路由器
      - 无线局域网 (LANs)：同一建筑物内 (30m)；802.11b/g (WiFi)：11Mbps、54Mbps传输速率
      - 广域无线接入：通过电信运营商 (蜂窝网) ，接入范围在几十公里；3G、 4G: LTE、移动互联网；1 Mbps、10 Mbps、100Mbps

- **网络核心 (核心网络)**：互联的路由器 (或分组转发设备)；网络之网络
  - 网络核心的关键功能：**路由+转发**
  - 网络核心解决的基本问题：通过**数据交换 (Data Exchange)**实现数据从源主机通过网络核心送达目的主机

### 1.2.2 Internet结构

端系统通过接入ISP (access ISPs )连接到Internet：家庭、公司和大学ISPs

接入ISP必须进一步互连：这样任意两个主机才可以互相发送分组

- 通过 **IXP (Internet exchange point)** 互联
- 通过**对等链路 (peering link)** 互联

可能出现**区域网络** (regional networks)连接接入ISP和运营商ISP

**内容提供商网络**(content provider networks，如： Google、Microsoft等) 可能运行其自己的网络，并就近为端用户提供服务、内容

![image-20201207193718748](/cn/image-20201207193718748.png)

## 1.3 数据交换

### 1.3.1 电路交换

最典型电路交换网络：电话网络

电路交换的三个阶段：建立连接 (呼叫/电路建立)；通信；释放连接 (拆除电路)

电路交换的显著特点是**独占资源**的

电路交换网络通过**多路复用 (Multiplexing)**共享中继线

### 1.3.2 多路复用

多路复用(Multiplexing)：链路/网络资源 (如带宽)划分为“资源片”，将资源片分配给各路“呼叫” (calls)，每路呼叫独占分配到的资源片进行通信，资源片可能“闲置”(idle) (无共享)

典型多路复用方法：

- **频分多路复用** (frequency division multiplexing-FDM )：频分多路复用的各用户占用不同的带宽 (Hz) 资源，用户在分配到一定的频带后，在通信过程中自始至终都占用这个频带。

- **时分多路复用** (time division multiplexing-TDM )：将时间划分为一段段等长的时分复用帧 (TDM 帧)，每个用户在每个 TDM 帧中占用固定序号的时隙。每用户所占用的时隙周期性出现。时分复用的所有用户是在不同的时间占用相同的频带宽度。

- **波分多路复用** (Wavelength division multiplexing-WDM)：波分复用就是光的频分复用*

- **码分多路复用** (Code division multiplexing-CDM )：每个用户分配一个唯一的m bit码片序列(chipping sequence)，其中“0”用“-1”表示、“1”用“+1”表示，例如：S 站的码片序列：(–1 –1 –1 +1 +1 –1 +1 +1)；各用户使用相同频率载波，利用各自码片序列编码数据，**编码信号 = (原始数据) × (码片序列)**

  - 条件：各用户码片序列相互正交

  - 各用户生成编码信号以后，在信道中会相互叠加形成新的传输信号，在接收端则可以使用想接收用户的码片解码，如下

    ![image-20201207200410134](/cn/image-20201207200410134.png)

### 1.3.3 报文交换

报文：源 (应用)发送信息整体。比如：一个文件

报文交换直接整体发送一个文件

### 1.3.4 分组交换

分组：报文分拆出来的一系列相对较小的数据包

分组交换需要报文的拆分与重组，产生额外开销。

分组交换不像电路交换会申请特定的独占的链路资源，所以存在多个主机共享同一段链路资源 (分组序列不确定，按需共享链路)，因此称其为**统计多路复用** (Statistical Multiplexing)

报文交换与分组交换均采用**存储-转发 (store-and-forward)**交换方式。区别：

- 报文交换以完整报文进行“存储-转发”
- 分组交换以较小的分组进行“存储-转发”·	

### 1.3.5 性能比较

#### 1.3.5.1 报文交换 vs 分组交换

发送主机：接收应用报文 (消息) 拆分为较小长度为 L bits的分组 (packets)；在传输速率为R的链路上传输分组

分组传输延迟 (时延) (delay)=  L bits / R (bits/sec)

- 报文交换：
  - 报文长度为M bits
  - 链路带宽为R bps
  - 每次传输报文需要M/R秒
  - 跳步数：h
  - 路由器数：n
  - 报文交付时间：T = hM / R = (n+1)M / R
- 分组交换：
  - 报文被拆分为多个分组
  - 分组长度为L bits
  - 每个分组传输时延为L/R秒
  - 跳步数：h
  - 路由器数：n
  - 报文交付时间：**T = M / R + (h-1)L / R = M / R + nL / R**

#### 1.3.5.2 分组交换 vs 电路交换

分组交换允许更多用户同时使用网络——网络资源充分共享

分组交换适用于突发数据传输网络，资源充分共享，简单、无需呼叫建立，但可能产生**拥塞** (congestion)：分组延迟和丢失，所以需要协议处理可靠数据传输和拥塞控制。

## 1.4 计算机网络性能

**速率**即数据率(data rate)或称数据传输速率或比特率(bit rate)：单位时间 (秒)传输信息 (比特)量，计算机网络中最重要的一个性能指标。单位：b/s (或bps)、kb/s、Mb/s、Gb/s

> k=103、M=106、G=109

“**带宽**” (bandwidth) 原本指信号具有的频带宽度，即最高频率与最低频率之差，单位是赫兹 (Hz)。网络的“带宽”通常是数字信道所能传送的“**最高数据率**”，单位：b/s (bps)

**延迟/时延**(delay或latency)，四种分组延迟：

- d~proc~： 结点处理延迟 (nodal processing delay)
  - 差错检测
  - 确定输出链路
  - 通常< msec
- d~queue~： 排队延迟 (queueing delay)
  - 等待输出链路可用
  - 取决于路由器拥塞程度
  - R： 链路带宽(bps)、L： 分组长度 (bits)、a： 平均分组到达速率，流量强度 (traffic intensity)= La/R
    - La/R ~ 0： 平均排队延迟很小
    - La/R -> 1： 平均排队延迟很大
    - La/R > 1： 超出服务能力，平均排队延迟无限大！
- d~trans~： 传输延迟 (transmission delay)——车队通过收费站时间
  - L： 分组长度(bits)
  - R： 链路带宽 (bps)
  - d~trans~ = L/R
- d~prop~： 传播延迟 (propagation delay)——每台车从第一个收费站跑到第二个收费站用时
  - d： 物理链路长度
  - s： 信号传播速度 (~2×108 m/sec)
  - d~prop~ = d/s

**时延带宽积** = 传播时延 \* 带宽 = d~prop~ \* R  (bits)

> 链路的时延带宽积又称为**以比特为单位的链路长度**

**分组丢失 (丢包)**：队列缓存容量有限，分组到达已满队列将被丢弃 (即丢包)，丢弃分组可能由前序结点或源重发 (也可能不重发)

**丢包率**= 丢包数 / 已发分组总数

**吞吐量** (Throughput)：表示在发送端与接收端之间传送数据速率 (b/s)

- 即时吞吐量： 给定时刻的速率
- 平均吞吐量： 一段时间的平均速率

> 瓶颈链路 (bottleneck link)：端到端路径上，限制端到端吞吐量的链路。

## 1.5 计算机网络体系结构

网络体系结构是**从功能上描述**计算机网络结构，计算机网络体系结构简称网络体系结构 (network architecture) 是**分层结构**，每层遵循某个/些网络协议完成本层功能，计算机网络体系结构是计算机网络的各层及其协议的集合，体系结构是一个计算机网络的功能层次及其关系的定义，体系结构是抽象的。

实体(entity) 表示任何可发送或接收信息的硬件或软件进程。协议是控制**两个对等实体**进行通信的规则的集合，**协议是“水平的”**。任一层实体需要使用下层服务，遵循本层协议，实现本层功能，向上层提供服务，**服务是“垂直的”**。下层协议的实现对上层的服务用户是透明的。同系统的相邻层实体间通过接口进行交互，通过服务访问点 SAP(Service Access Point)，交换原语，指定请求的特定服务。

### 1.5.1 OSI参考模型

开放系统互连 (OSI)参考模型是由国际标准化组织 (ISO) 于1984年提出的分层网络体系结构模型，目的是支持**异构网络系统**的互联互通。

**OSI参考模型解释的通信过程**如下图，可以看出应用层、表示层、会话层、传输层是**端到端的**。

![image-20201208091132095](/cn/image-20201208091132095.png)

**数据封装**：增加控制信息，构造协议数据单元 (PDU)。控制信息主要包括:

- 地址（Address）: 标识发送端/接收端
- 差错检测编码（Error-detecting code）: 用于差错检测或纠正
- 协议控制（Protocol control）: 实现协议功能的附加信息，如: 优先级（priority）、服务质量（QoS）、 和安全控制等

**七层功能**：

- **应用层**（Application）：支持用户通过用户代理（如浏览器）或网络接口使用网络（服务）
- **表示层**（Presentation）：处理两个系统间交换信息的语法与语义（syntax and semantics ）问题
  - 数据表示转化：转换为主机独立的编码
  - 加密/解密
  - 压缩/解压缩
- **会话层**（Session）：对话控制（dialog controlling）：建立、维护
  - 同步：在数据流中插入“同步点”
  - 最“薄”的一层
- **传输层**（Transport）：负责源-目的（端-端）的（进程间） 完整报文传输
  - 分段与重组
  - SAP寻址：确保将完整报文提交给正确进程，如端口号
  - 连接控制
  - 流量控制
  - 差错控制
- **网络层**（Network）：负责源主机到目的主机数据分组（packet）传输，可能穿越多个网络
  - **逻辑寻址**（Logical addressing）：全局唯一逻辑地址，确保数据分组被送达目的主机，如IP地址
  - **路由**（Routing）：路由器（或网关）互连网络，并路由分组至最终目的主机
  - **转发**（Forwarding）
- **数据链路层**（Data link）：负责结点-结点（node-to-node）数据传输
  - **组帧**（Framing）
  - **物理寻址**（Physical addressing）：在帧头中增加发送端和/或接收端的物理地址标识数据帧的发送端和/或接收端
  - **流量控制**（Flow control）：避免淹没接收端
  - **差错控制**（Error control）：检测并重传损坏或丢失帧，并避免重复帧
  - **访问控制**（Access control）：在任一给定时刻决定哪个设备拥有链路（物理介质）控制使用权
- **物理层**（Physical）
  - 接口特性：机械特性、电气特性、功能特性、规程特性
  - 比特编码
  - 数据率
  - **比特同步**：时钟同步
  - 传输模式：单工（Simplex）——单向传输、半双工（half-duplex）——交替双向通信、全双工（full-duplex）——同时双向通信

### 1.5.2 TCP/IP参考模型

![image-20201208092936972](/cn/image-20201208092936972.png)

在TCP/IP参考模型下，是网络接口无关的，只要能封装成IP数据报，即可在网际传输。

### 1.5.3 五层参考模型

>综合 OSI 和 TCP/IP 的优点

- 应用层: 支持各种网络应用，FTP, SMTP, HTTP
- 传输层: 进程-进程的数据传输，TCP, UDP
- 网络层: 源主机到目的主机的数据分组路由与转发，IP协议、路由协议等
- 链路层: 相邻网络元素（主机、交换机、路由器等）的数据传输，以太网（Ethernet）、802.11 (WiFi)、PPP
- 物理层:比特传输

**5层参考模型下的网络通信过程与数据封装**

![image-20201208093747847](/cn/image-20201208093747847.png)

![image-20201208093806610](/cn/image-20201208093806610.png)

## 1.6 计算机网络发展历史

略